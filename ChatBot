<!-- ChatBot HTML -->
<button type="button" class="btn btn-primary" id="chatBot_btn">
    <svg xmlns="http://www.w3.org/2000/svg" width="44" height="44" fill="#fff" class="bi bi-chat-dots" viewBox="0 0 16 16">
      <path d="M5 8a1 1 0 1 1-2 0 1 1 0 0 1 2 0m4 0a1 1 0 1 1-2 0 1 1 0 0 1 2 0m3 1a1 1 0 1 0 0-2 1 1 0 0 0 0 2"/>
      <path d="m2.165 15.803.02-.004c1.83-.363 2.948-.842 3.468-1.105A9 9 0 0 0 8 15c4.418 0 8-3.134 8-7s-3.582-7-8-7-8 3.134-8 7c0 1.76.743 3.37 1.97 4.6a10.4 10.4 0 0 1-.524 2.318l-.003.011a11 11 0 0 1-.244.637c-.079.186.074.394.273.362a22 22 0 0 0 .693-.125m.8-3.108a1 1 0 0 0-.287-.801C1.618 10.83 1 9.468 1 8c0-3.192 3.004-6 7-6s7 2.808 7 6-3.004 6-7 6a8 8 0 0 1-2.088-.272 1 1 0 0 0-.711.074c-.387.196-1.24.57-2.634.893a11 11 0 0 0 .398-2"/>
    </svg>
</button>

<div class="chat-container">
    <div class="chat-header d-flex justify-content-between align-items-center">
        <div class="agent_div d-flex align-items-center">
            <div class="icon_div">
                <img src="<?php echo WEBSITE_ASSETS_IMAGES_URL; ?>bot_icon.jpg" alt="" width="60" height="60">
            </div>
            <div class="agent_name ms-3 text-left">
                <p class="m-0 font12 bold300 text-left">Chat With</p>
                <p class="m-0 font20 bold500">Angel</p>
            </div>
        </div>
        <div class="close_div">
            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" class="bi bi-chevron-down" viewBox="0 0 16 16">
              <path fill-rule="evenodd" d="M1.646 4.646a.5.5 0 0 1 .708 0L8 10.293l5.646-5.647a.5.5 0 0 1 .708.708l-6 6a.5.5 0 0 1-.708 0l-6-6a.5.5 0 0 1 0-.708"/>
            </svg>
        </div>
    </div>
    <div class="chat-body" id="chatBody">
        <div class="bot-message">Hi There, I am Angel, Your AI Assistant. How may I help you?</div>
    </div>
    <div class="chat-input">
        <input type="text" id="userInput" placeholder="Type a message..." />
        <button onclick="sendMessage()">
            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" class="bi bi-send" viewBox="0 0 16 16">
                  <path d="M15.854.146a.5.5 0 0 1 .11.54l-5.819 14.547a.75.75 0 0 1-1.329.124l-3.178-4.995L.643 7.184a.75.75 0 0 1 .124-1.33L15.314.037a.5.5 0 0 1 .54.11ZM6.636 10.07l2.761 4.338L14.13 2.576zm6.787-8.201L1.591 6.602l4.339 2.76z"/>
            </svg>
        </button>
    </div>
</div>


<!-- ChatBot Script -->
<script>
    $('#chatBot_btn').on('click', function(){
        $('.chat-container').toggle();
    });
    $('.close_div').on('click', function(){
        $('.chat-container').hide();
    });


    function sendMessage() {
        const userInput = $("#userInput").val();
        const chatBody = $("#chatBody");

        if (userInput.trim() === "") return;
        // User message
        const userMessage = $("<div>")
            .addClass("chat-message user")
            .text(userInput);
        chatBody.append(userMessage);
        // Clear input
        $("#userInput").val("");
        // Generate bot response with typing effect
        const botMessage = $("<div>").addClass("chat-message bot");
        chatBody.append(botMessage);
        botTypingEffect(botMessage, getBotResponse(userInput));
        // Scroll to the bottom
        chatBody.scrollTop(chatBody[0].scrollHeight);
    }

function getBotResponse(input) {
    const responses = {
        "hello": "Hi there! How can I help you?",
        "how are you": "I'm just a bot, but I'm doing great! How about you?",
        "how big is the bicycle shoe market": "The bicycle shoe market is valued at USD 1.22 billion in 2023.",
        "what is the anticipated cagr during the assessment period": "the anticipated cagr is 5.5% for 2024 to 2034.",
        "what will the worth of global blow molded plastic industry by 2034 end": "the global blow molded plastic industry is anticipated to reach usd 128.5 billion by 2034 end.",
        "what is the future of global blow molded plastic industry": "the global blow molded plastic industry is projected to witness cagr of 5.3% between 2024 and 2034.",
        "what is the future of colorimetric indicator labels industry": "the colorimetric indicator labels industry is projected to witness cagr of 6.9% between 2024 and 2034.",
        "what is cagr for Bundling Machine Market": "south asia & pacific is set to record a cagr of 5.9% in assessment period.",
        "what will be the market value by 2034": "the market value will reach usd 2.5 billion.",
        "what is the estimated market value in 2024": "the market value is estimated at usd 1.4 billion.",
        "how big is the polyethylene pipe market expected in 2024": "the demand for polyethylene pipe market is set to reach usd 33,448.7 million in 2024.",
        "how big is the global industry": "the global market is set to reach usd 4,284.0 million in 2024.",
        "what will drive the demand for peptone during the forecast period": "the global probiotics market is expanding due to growing awareness of gut health. peptone-based media enable the cultivation of beneficial bacteria such as lactobacillus and bifidobacterium, which are central to probiotic formulations to drive the demand for peptone during the forecast period.",
        "what is the projected growth rate for the air purifier market": "the air purifier market is expected to record a cagr of ~13.7% during the forecast period.",
        "what is the global aloe vera gel market value": "the global aloe vera gel market reached a valuation of usd 345.6 million in 2024.",
        "what is the current market value of the destination marketing sector": "the destination marketing sector is valued at usd 155.2 billion in 2024.",
        "in which european country will the cagr be high": "the united kingdom is set to exhibit growth at a cagr of 14%.",
        "what is the future of global photonic sensors & detectors industry": "the industry is projected to witness cagr of 8.2% between 2024 and 2034.",
        "what is the future of global submarine communication cables markets": "the global submarine communication cables industry is projected to witness cagr of 6.2% between 2024 and 2034.",
        "what is the future of global customer engagement solutions industry": "the global customer engagement solutions industry is projected to witness cagr of 15.4% between 2024 and 2034.",
        "how is the demand increasing": "demand is predicted to rise at 17.7% cagr.",
        "which region will garner a significant value share by 2024": "the north american is projected to hold a revenue share of 28.7 % over the forecast period.",
        "what is the current value of the npk fertilizers industry": "the global market is estimated at a value of usd 3,196.7 million in 2024.",
        "at what rate will the industry grow": "throughout the forecast period, the market is expected to grow at a cagr of 5.5%.",
        "who are the key players in manufacturing": "some of the key players in manufacturing include chr hansen a/s, aarkay food products, fmc corporation, basf se, dohler group, lycored, kemin industries inc, cyanotech corporation, divis laboratories, allied biotech corporation, d. williamson & co. inc., kalsec inc., basf se, akay group, sensient technology corporation, wild flavors, avt natural products, naturex group and other players.",
        "who are the leading manufacturers of brewing enzymes": "some of the leaders in this industry include novozymes, international flavors & fragrances inc., dowdupont, dsm, amano enzyme, associated british foods, chr. hansen holdings, kerry group, brenntag, aumgene biosciences, enzyme development corporation, megazyme, enzyme innovation, a group soufflet company, nature bioscience pvt. ltd., biolaxi corporation, ultreze enzymes, and infinita biotech and many others.",

        "bye": "Goodbye! Have a great day!",
    };

    return responses[input.toLowerCase()] || "Apologies for any confusion! My AI knowledge is only focused on Market Research. Please rephrase your query and I'll be happy to assist you.";
}

    function botTypingEffect(element, message) {
        let i = 0;
        const interval = setInterval(() => {
            if (i < message.length) {
                element.text(element.text() + message.charAt(i));
                i++;
            } else {
                clearInterval(interval);
            }
            // Auto-scroll as letters appear
            $("#chatBody").scrollTop($("#chatBody")[0].scrollHeight);
        }, 50); // Adjust speed by changing 50ms to a different value
    }

// Trigger sendMessage on button click or Enter key
    $(document).ready(function () {
        $("#sendBtn").click(function () {
            sendMessage();
        });

        $("#userInput").keypress(function (e) {
            if (e.key === "Enter" || e.which === 13) {
                sendMessage();
                e.preventDefault();
            }
        });
    });
</script>

<!-- ChatBot CSS -->
#chatBot_btn{background: #0366ff;border: 1px solid #0366ff;position: fixed;bottom:20px;right: 20px;padding:8px 12px 10px;box-shadow: none;z-index: 1;border-radius:100px;cursor: pointer;box-shadow: 0px 0px 5px 4px rgba(0, 0, 0, 0.24)}
.close_div{padding: 10px;cursor: pointer}
.chat-container {display:none;width: 420px; position: fixed; bottom: 20px; right: 20px; background: #fff; box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2); border-radius: 10px; overflow: hidden;z-index: 1}
.chat-header {background: #0366ff; color: white; padding: 10px; font-weight: bold}
.chat-body {height: 400px; overflow-y: auto; padding: 10px}
.chat-input {display: flex; border-top: 1px solid #ccc}
.chat-input input {flex: 1; padding: 10px; border: none; outline: none}
.chat-input button {padding: 10px; background: #0366ff; color: white; border: none; cursor: pointer}
.chat-message {margin-bottom: 10px}
.user {text-align: right; color: #0366ff; background: #fff;padding:8px 20px;border: 1px solid #0366ff;border-radius: 6px;width: fit-content;float: right;margin-left: 30px}
.bot {text-align: left; color: #555;background: #eff2f6;padding:8px 10px;border-radius: 6px;clear: both;margin-right: 30px}
.bot-message{background: #eff2f6;padding: 8px 10px;border-radius: 8px;margin: 0px 15px 15px}
